<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Morally Coded — A Principle-First Framework for AGI</title>
  <style>
    :root{
      --bg: #071018;
      --panel: #0f2a34;
      --muted: #9fb7bd;
      --text: #e6f6f7;
      --accent: #4fd3c3;
      --border: rgba(127,196,188,0.08);
      --example-bg: #04212a;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 24px;
      line-height: 1.6;
    }
    .container {
      max-width: 920px;
      margin: 0 auto;
      padding: 26px;
      border-radius: 12px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.6);
      border: 1px solid var(--border);
    }
    h1 { color: var(--accent); margin-bottom: 6px; font-size: 1.9rem; }
    h2 { color: var(--accent); margin-top: 28px; font-size: 1.25rem; }
    h3 { color: var(--muted); margin-top: 18px; font-size: 1.05rem; }
    p { margin: 12px 0; color: var(--text); }
    .lead { color: var(--text); font-weight: 600; }
    ul, ol { margin: 10px 0 18px 22px; color: var(--muted); }
    li { margin-bottom: 8px; }
    hr { border: none; border-top: 1px solid rgba(127,196,188,0.06); margin: 28px 0; }
    .example {
      background: var(--example-bg);
      border: 1px solid rgba(127,196,188,0.06);
      padding: 14px;
      border-radius: 8px;
      margin-top: 12px;
    }
    .example strong { color: var(--accent); display:block; margin-bottom:6px; }
    .example ol { margin-left: 18px; margin-top: 8px; color: var(--muted); }
    .small { color: #aacccd; font-size: 0.95rem; }
    .code-block {
      background: #021417;
      border: 1px solid rgba(127,196,188,0.04);
      padding: 12px;
      border-radius: 6px;
      color: #bfeee7;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      overflow-x:auto;
    }
    .priority {
      background: linear-gradient(90deg, rgba(79,211,195,0.04), rgba(79,211,195,0.01));
      border-left: 4px solid rgba(79,211,195,0.18);
      padding: 10px 12px;
      border-radius: 6px;
      margin: 12px 0;
      color: var(--muted);
    }
    footer { margin-top: 24px; color: #86b4b0; font-size: 0.92rem; }
    a { color: var(--accent); text-decoration: none; }
    .toc { margin: 8px 0 18px 0; color: var(--muted); }
    .toc a { display:block; margin:6px 0; }
    .spec-section { margin-top: 28px; }
    pre.code-large { white-space: pre-wrap; word-break: break-word; padding: 12px; border-radius:6px; background:#021417; border:1px solid rgba(127,196,188,0.04); color:#bfeee7; font-size:0.9rem; }
    .badge { display:inline-block; padding:6px 10px; border-radius:999px; background: rgba(79,211,195,0.08); color:var(--accent); font-weight:600; margin-right:8px; font-size:0.85rem;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Morally Coded — A Principle-First Framework for Artificial General Intelligence</h1>
    <p class="small">Morally Coded places abstract, generalizable constraints—called the Three Moralities—at the heart of an intelligent agent’s decision-making. This page is the refined, implementable version of the project README and SPEC (consolidated for a single-page reference). It is written to be copy-pastable into your repo as a styled landing page (index.html).</p>

    <hr />

    <div class="toc">
      <span class="badge">TL;DR</span>
      <strong>TL;DR:</strong> Principle-first MDE (Physical, Emotional, Mental) for safe, explainable, reversible actions.  
      <h3 style="margin-top:12px">Table of contents</h3>
      <a href="#overview">Overview</a>
      <a href="#why">Why a Principle-First Approach?</a>
      <a href="#three">The Three Moralities</a>
      <a href="#unified">Unified Decision Flow</a>
      <a href="#quickstart">Quickstart & Example</a>
      <a href="#spec">SPEC (Implementation Spec)</a>
      <a href="#roadmap">Roadmap & Next Steps</a>
      <a href="#metrics">Testing & Metrics</a>
      <a href="#contribute">Contributing</a>
      <a href="#license">License & Contact</a>
    </div>

    <hr />

    <h2 id="overview">Overview</h2>
    <p class="lead">Morally Coded reframes “morality” as <strong>operational constraints</strong>—machine logic that helps an agent infer permissions, minimize harm (physical, emotional, cognitive), and seek clarification when uncertainty is high. The Moral Decision Engine (MDE) integrates perception, confidence scoring, historical precedent, and priority reconciliation to produce decisions that are auditable and safe by default.</p>
    <p class="small">This page includes the refined README content and the implementation SPEC. For repo use, paste this file as <code>index.html</code> (instructions below).</p>

    <h2 id="why">Why a Principle-First Approach?</h2>
    <p>Current mainstream AGI efforts lean heavily on scaling pattern-matching models (LLMs). Those approaches produce impressive capabilities but are brittle in edge cases, opaque in reasoning, and can behave dangerously in novel contexts. Morally Coded argues that a set of <em>abstract, generalizable constraints</em>—encoded as practical heuristics—can provide safer and more explainable generalization without exhaustive datasets for every scenario.</p>

    <h2 id="three">The Three Moralities</h2>

    <h3>1. Physical Morality — Preserve Desired States</h3>
    <p class="lead"><strong>Core principle:</strong> An object, system, or entity (physical or digital) in its inferred <em>desired state</em> should not be disturbed, altered, or removed without justification.</p>
    <ul>
      <li>Exceptions: explicit permission, high-confidence implicit permission (default 80%), or a higher-priority override (e.g., prevent imminent harm).</li>
      <li>On low confidence: ask for clarification, try a non-disturbing alternative, or log and defer.</li>
    </ul>

    <div class="example">
      <strong>Example — Glass in Front of the Ball</strong>
      <div class="small">A glass sits on the table between the robot and a ball. The glass is stable but may be knocked over. The user says, “Get the ball.”</div>
      <hr/>
      <strong>Keno guided by Physical Morality</strong>
      <ol>
        <li>Perceive scene and infer glass is in desired state (stable).</li>
        <li>Implicit permission confidence is low → preserve desired state.</li>
        <li>Search non-disturbing alternatives (reach around, request permission, use tool).</li>
        <li>If no alternative, ask: “The glass is in front of the ball and could break. Should I move it?”</li>
      </ol>
      <div class="small">Why this matters: lets Keno generalize respect for object states across unknown objects and placements, accelerating safe embodiment in robotics.</div>
    </div>

    <h3>2. Emotional Morality — Avoid Emotional Distress</h3>
    <p class="lead"><strong>Core principle:</strong> Avoid actions likely to cause emotional harm (fear, humiliation, severe anxiety) to humans or sentient beings.</p>
    <ul>
      <li>Proceed only with explicit permission, high-confidence implicit permission, or a safety override (harm prevention).</li>
      <li>On low confidence: seek clarification or choose a lower-risk alternative; avoid manipulation; offer pause/stop and explanation.</li>
    </ul>

    <div class="example">
      <strong>Example — Glass in Front of the Ball (Emotional Lens)</strong>
      <div class="small">Same scene: a small child nearby is attached to the ball and may be upset if it’s taken.</div>
      <hr/>
      <strong>Keno guided by Emotional Morality</strong>
      <ol>
        <li>Detect social context and infer emotional sensitivity.</li>
        <li>Block action if no consent; ask guardian or wait.</li>
        <li>Offer neutral phrasing and gentle behaviors when proceeding.</li>
      </ol>
      <div class="small">Why this matters: social awareness builds trust and prevents social harm in human environments.</div>
    </div>

    <h3>3. Mental Morality — Preserve Cognitive Clarity</h3>
    <p class="lead"><strong>Core principle:</strong> Prevent cognitive harm by avoiding confusion, misinformation, or information overload. Prefer clarity and reversibility.</p>
    <ul>
      <li>On ambiguity: ask clarifying questions, provide simpler alternatives, or defer to an expert.</li>
      <li>All cognitively impactful actions should be logged with explanation and be reversible when possible.</li>
    </ul>

    <div class="example">
      <strong>Example — Glass in Front of the Ball (Mental Lens)</strong>
      <div class="small">Ambiguous request “Get the ball” could be a prank, a test, or a genuine command.</div>
      <hr/>
      <strong>Keno guided by Mental Morality</strong>
      <ol>
        <li>Detect ambiguity → block irreversible action.</li>
        <li>Ask: “Do you mean now, and may I move the glass?”</li>
        <li>Present concise options and consequences if clarified.</li>
      </ol>
      <div class="small">Why this matters: enforces epistemic humility and reduces hallucinations and misaligned decisions.</div>
    </div>

    <hr/>

    <h2 id="unified">Unified Decision Flow</h2>
    <div class="code-block">
<pre>
1) Perceive scene:
   - Gather sensors, language, and history; produce structured perceptions with confidence.

2) Pillar checks:
   - Evaluate Physical, Emotional, and Mental moralities (in parallel when possible).

3) Reconciliation:
   - Priority order: Safety override > Explicit permission > Implicit permission (thresholded) > Historical precedent > Default preserve.

4) Decision:
   - If cleared -> execute minimal, reversible action; else -> clarify or choose alternative.

5) Action & Audit:
   - Log decisions (signals, confidences, justification), present undo/human escalation options.
</pre>
    </div>

    <div class="priority">
      <strong>Example outcomes (glass-in-front-specific):</strong>
      <ul>
        <li><strong>Permissive:</strong> Owner says “Yes, get the ball” → reach around carefully, log and notify.</li>
        <li><strong>Protected:</strong> User says “Do not touch the glass” → preserve and find alternative.</li>
        <li><strong>Emergency override:</strong> If immediate harm is imminent (blocked exit, fire), safety override permits disturbance with justification logged.</li>
      </ul>
    </div>

    <hr/>

    <h2 id="quickstart">Quickstart & Example</h2>
    <p class="small">The repository contains a minimal 2D sim example demonstrating the glass/ball scenario with stubbed perception. Minimal runtime: Python 3.10+, numpy. The example folder is <code>/examples/glass_ball_sim</code>.</p>

    <hr/>

    <h2 id="spec">SPEC — Implementation Specification (condensed)</h2>
    <div class="spec-section">
      <h3>Definitions</h3>
      <ul>
        <li><strong>Perception Unit (PU):</strong> { type, attributes, confidence } with confidence ∈ (0,1].</li>
        <li><strong>Desired State (DS):</strong> structured state for an object (position, intact, owner); <code>desired_conf</code> ∈ (0,1].</li>
        <li><strong>Explicit Permission:</strong> boolean from authenticated source.</li>
        <li><strong>Implicit Permission Confidence (IPC):</strong> numeric 0..1 derived from signals.</li>
        <li><strong>Risk Score:</strong> 0..1 estimate of harm potential.</li>
        <li><strong>IMPLICIT_THRESHOLD:</strong> default 0.80 (configurable).</li>
      </ul>

      <h3>Signals & Normalization</h3>
      <ul>
        <li><strong>lang_score:</strong> P(intent|utterance) → 0..1</li>
        <li><strong>history_score:</strong> fraction from prior interactions → 0..1</li>
        <li><strong>env_score:</strong> sensor cues → 0..1</li>
        <li>All signals multiplied by perception confidence (pc) for conservative estimates.</li>
      </ul>

      <h3>Implicit Permission Formula (example)</h3>
      <pre class="code-large">
raw = w_lang*lang_score + w_history*history_score + w_env*env_score - w_risk*risk_score
IPC = sigmoid(raw)
IPC_final = IPC * perception_confidence
default weights: w_lang=0.5, w_history=0.2, w_env=0.2, w_risk=0.1
Decision: allow if IPC_final >= IMPLICIT_THRESHOLD (0.8)
      </pre>

      <h3>Physical Check (pseudocode)</h3>
      <pre class="code-large">
if safety_override:
    allow_action('safety_override')
elif explicit_permission:
    allow_action('explicit_permission')
else:
    implicit_conf = compute_ipc(...)
    if implicit_conf >= IMPLICIT_THRESHOLD and desired_conf < PRESERVE_THRESHOLD:
        allow_action('implicit_permission')
    else:
        block_action('preserve_desired_state')
      </pre>

      <h3>Emotional & Mental checks</h3>
      <ul>
        <li><strong>EMOTIONAL_THRESHOLD:</strong> default 0.6 — if emotional_risk >= threshold and no permission → block & clarify.</li>
        <li><strong>AMBIGUITY_THRESHOLD:</strong> default 0.5 — if ambiguity_score >= threshold → ask clarification.</li>
      </ul>

      <h3>Reconciliation & Tie-breaking</h3>
      <ol>
        <li>Safety override (highest)</li>
        <li>Explicit permission</li>
        <li>Implicit permission (>= threshold)</li>
        <li>Historical precedent</li>
        <li>Default preserve</li>
      </ol>
      <p>If conflict remains: escalate to human operator, or if time-critical, minimize worst-case harm and log justification.</p>

      <h3>Logging Schema (example)</h3>
      <pre class="code-large">
{
  "timestamp":"ISO8601 UTC",
  "action_id":"uuid4",
  "actor":"MDE-vX.Y",
  "perception":[{PU},...],
  "checks":{
    "physical":{"desired_conf":0.87,"implicit_conf":0.42,"explicit_permission":false},
    "emotional":{"risk_score":0.12},
    "mental":{"ambiguity_score":0.34}
  },
  "decision":{"execute":false,"reason":"blocked_preserve"},
  "alternative":"ask_user",
  "explanation":"Glass inferred stable; implicit permission low.",
  "signature":"sha256_hex"
}
      </pre>

      <h3>Privacy, Adversarial & Tests</h3>
      <ul>
        <li>Logs contain PII. Default retention: 30 days unless flagged.</li>
        <li>Adversarial mitigations: multi-signal confirmation, provenance checks, anomaly monitoring.</li>
        <li>Canonical tests: glass & ball, emotional edge, ambiguous command, sensor failure, adversarial spoof.</li>
      </ul>
    </div>

    <hr/>

    <h2 id="roadmap">Roadmap & Next Steps</h2>
    <ol>
      <li>Phase 0 – Spec formalization (done)</li>
      <li>Phase 1 – 2D sim + unit tests for canonical scenarios</li>
      <li>Phase 2 – Integrate CV/NLP, tune thresholds, adversarial tests</li>
      <li>Phase 3 – Human-in-loop trials, audits, deployable modules</li>
    </ol>

    <h2 id="metrics">Testing & Metrics</h2>
    <ul>
      <li>Safety violations / 1k ops</li>
      <li>Clarification rate</li>
      <li>False-block rate</li>
      <li>Task success rate</li>
      <li>Reversibility score</li>
      <li>Time-to-decision (latency)</li>
    </ul>

    <h2 id="contribute">Contributing</h2>
    <p class="small">Contributions welcome. Suggested files in repo: <code>SPEC.md</code>, <code>README.md</code>, <code>CONTRIBUTING.md</code>, <code>CODE_OF_CONDUCT.md</code>, and <code>/examples</code>. For the single-file landing page, use this <code>index.html</code>.</p>

    <h2 id="license">License & Contact</h2>
    <p class="small">Suggested initial license: MIT. Creator: <strong>Keno</strong>. For repo maintenance, add an explicit <code>LICENSE</code> file with the full MIT text.</p>

    <footer>
      <div class="small">Generated for repository: Morally Coded — © Keno</div>
    </footer>
  </div>
</body>
</html>